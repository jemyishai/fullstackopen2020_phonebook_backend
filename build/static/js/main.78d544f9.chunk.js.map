{"version":3,"sources":["Filter.js","Form.js","Person.js","Persons.js","Notification.js","services/numbers.js","App.js","index.js"],"names":["Filter","filter","setFilter","value","onChange","event","console","log","target","filteredInput","replace","Form","onSubmit","valueName","valueNumber","onChangeName","onChangeNumber","type","Person","person","deletion","key","name","number","onClick","Persons","persons","filterTest","map","Notification","message","styling","className","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","request","status","App","useState","setPersons","useEffect","services","catch","error","newName","setNewName","newNumber","setNewNumber","notification","setNotification","notificationType","setNotificationType","reset","preventDefault","setTimeout","res","every","nameCheck","window","confirm","personObj","find","UpdateRes","RegExp","test","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.78d544f9.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ filter, setFilter }) => {\n  const onFilter = (event) => {\n    console.log(event.target.value);\n    //ensure special character does not break the filter\n    const regex = /[^\\-a-zA-Z0-9' ]+/gi;\n    let filteredInput = event.target.value.replace(regex, \"\");\n    setFilter(filteredInput);\n  };\n\n  return (\n    <div>\n      filter shown with\n      <input value={filter} onChange={onFilter} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst Form = ({\n  onSubmit,\n  valueName,\n  valueNumber,\n  onChangeName,\n  onChangeNumber\n}) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        <h2>add a new</h2>\n        name: <input value={valueName} onChange={onChangeName} /> <br />\n        number: <input value={valueNumber} onChange={onChangeNumber} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default Form;\n","import React from \"react\";\n\nconst Person = ({ person, deletion }) => (\n  <div key={person.name}>\n    {person.name} {person.number} <button onClick={()=>deletion(person.name)}>delete</button>\n  </div>\n);\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ persons, filterTest, deletion }) => {\n  return (\n    <div>\n      {persons.filter(filterTest).map((person) => (\n        <Person key={person.name+1} person={person} deletion={deletion}/>\n      ))}\n    </div>\n  );\n};\n\nexport default Persons;\n","import React from 'react'\n\nconst Notification = ({ message,styling }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className={styling}>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(request=>request.status)\n}\n\nexport default { getAll, create, update, deletePerson }\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./Filter\";\nimport Form from \"./Form\";\nimport Persons from \"./Persons\";\nimport Notification from \"./Notification\";\nimport services from \"./services/numbers.js\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n\n  useEffect(() => {\n    services\n      .getAll()\n      .then((response) => {\n        console.log(response);\n        setPersons(response);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }, []);\n\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n  const [notificationType, setNotificationType] = useState(\"notice\");\n\n  const reset = () => {\n    setNewName(\"\");\n    setNewNumber(\"\");\n    services\n      .getAll()\n      .then((response) => {\n        setPersons(response);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  };\n\n  const submitName = (event) => {\n    event.preventDefault();\n\n    //name and number must be filled out - front end handles this\n    if (!newName || !newNumber) {\n      setNotificationType(\"error\")\n      setNotification(\"Name & Number must be filled out\");\n      setTimeout(() => {\n        setNotification(null);\n        setNotificationType(\"notice\");\n      }, 5000);\n    }\n\n    //run this getAll call in case multiple tabs are creating same person\n    //set backend res to state of truth\n\n    if (newName && newNumber) {\n      services\n        .getAll()\n        .then((res) => {\n          console.log(\"Going to run some checks\");\n          if (res.every((nameCheck) => nameCheck.name !== newName)) {\n            services\n              .create({ name: newName, number: newNumber })\n              .then((response) => {\n                setPersons([...persons, response]);\n              })\n              .catch((error) => {\n                console.error(error);\n              });\n            setNotification(`Added ${newName}`);\n            setTimeout(() => {\n              setNotification(null);\n            }, 5000);\n            reset();\n          } else {\n            let result = window.confirm(\n              `${newName} is already added to phonebook, replace the old number with a new one?`\n            );\n            if (result) {\n              let personObj = res.find((person) => person.name === newName);\n              console.log(personObj);\n              services\n                .update(personObj.id, { name: newName, number: newNumber })\n                .then((UpdateRes) => {\n                  setPersons([\n                    ...persons.filter((person) => person.id !== personObj.id),\n                    UpdateRes,\n                  ]);\n                  setNotification(`Updated ${newName}'s number`);\n                  setTimeout(() => {\n                    setNotification(null);\n                  }, 5000);\n                })\n                .catch((error) => {\n                  setNotificationType(\"error\");\n                  setNotification(\n                    `Information of ${newName} has already been removed from the server. The front-end is being updated`\n                  );\n                  setTimeout(() => {\n                    setNotification(null);\n                    setNotificationType(\"notice\");\n                  }, 5000);\n                  console.error(error);\n                });\n            }\n            reset();\n          }\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    }\n  };\n\n  const deletion = (name) => {\n    let result = window.confirm(`Delete ${name} ?`);\n    if (result) {\n      let personObj = persons.find((person) => person.name === name);\n      services\n        .deletePerson(personObj.id)\n        .then((res) => {\n          console.log(\"delete res here\", res);\n          setPersons(persons.filter((person) => person.id !== personObj.id));\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n      setNotification(`${personObj.name} has been deleted`);\n      setPersons(persons.filter((person) => person.id !== personObj.id));\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n    }\n    reset();\n  };\n\n  const onChangeName = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const onChangeNumber = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const filterTest = ({ name }) => {\n    const filteringNames = new RegExp(filter, \"ig\");\n    return filteringNames.test(name);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} styling={notificationType} />\n      <Filter filter={filter} setFilter={setFilter} />\n      <Form\n        onSubmit={submitName}\n        valueName={newName}\n        valueNumber={newNumber}\n        onChangeName={onChangeName}\n        onChangeNumber={onChangeNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filterTest={filterTest} deletion={deletion} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}