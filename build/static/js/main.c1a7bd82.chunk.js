(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(16),c=t.n(r),u=t(6),l=t(2),i=function(e){var n=e.filter,t=e.setFilter;return o.a.createElement("div",null,"filter shown with",o.a.createElement("input",{value:n,onChange:function(e){console.log(e.target.value);var n=e.target.value.replace(/[^\-a-zA-Z0-9' ]+/gi,"");t(n)}}))},f=function(e){var n=e.onSubmit,t=e.valueName,a=e.valueNumber,r=e.onChangeName,c=e.onChangeNumber;return o.a.createElement("form",{onSubmit:n},o.a.createElement("div",null,o.a.createElement("h2",null,"add a new"),"name: ",o.a.createElement("input",{value:t,onChange:r})," ",o.a.createElement("br",null),"number: ",o.a.createElement("input",{value:a,onChange:c})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.person,t=e.deletion;return o.a.createElement("div",{key:n.name},n.name," ",n.number," ",o.a.createElement("button",{onClick:function(){return t(n.name)}},"delete"))},s=function(e){var n=e.persons,t=e.filterTest,a=e.deletion;return o.a.createElement("div",null,n.filter(t).map((function(e){return o.a.createElement(m,{key:e.name+1,person:e,deletion:a})})))},d=function(e){var n=e.message,t=e.styling;return null===n?null:o.a.createElement("div",{className:t},n)},h=t(4),b=t.n(h),v="https://fullstackopen2020phonebook.herokuapp.com/api/persons",p=function(){return b.a.get(v).then((function(e){return e.data}))},g=function(e){return b.a.post(v,e).then((function(e){return e.data}))},E=function(e,n){return b.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},j=function(e){return b.a.delete("".concat(v,"/").concat(e)).then((function(e){return e.status}))},O=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],r=n[1];Object(a.useEffect)((function(){p().then((function(e){console.log(e),r(e)})).catch((function(e){console.error(e)}))}),[]);var c=Object(a.useState)(""),m=Object(l.a)(c,2),h=m[0],b=m[1],v=Object(a.useState)(""),O=Object(l.a)(v,2),k=O[0],w=O[1],N=Object(a.useState)(""),y=Object(l.a)(N,2),S=y[0],C=y[1],T=Object(a.useState)(null),x=Object(l.a)(T,2),A=x[0],D=x[1],F=Object(a.useState)("notice"),I=Object(l.a)(F,2),J=I[0],z=I[1],B=function(){b(""),w(""),p().then((function(e){r(e)})).catch((function(e){console.error(e)}))};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(d,{message:A,styling:J}),o.a.createElement(i,{filter:S,setFilter:C}),o.a.createElement(f,{onSubmit:function(e){e.preventDefault(),p().then((function(e){if(console.log("Going to run some checks"),e.every((function(e){return e.name!==h})))g({name:h,number:k}).then((function(e){r([].concat(Object(u.a)(t),[e]))})).catch((function(e){console.error(e)})),D("Added ".concat(h)),setTimeout((function(){D(null)}),5e3),B();else{if(window.confirm("".concat(h," is already added to phonebook, replace the old number with a new one?"))){var n=e.find((function(e){return e.name===h}));console.log(n),E(n.id,{name:h,number:k}).then((function(e){r([].concat(Object(u.a)(t.filter((function(e){return e.id!==n.id}))),[e])),D("Updated ".concat(h,"'s number")),setTimeout((function(){D(null)}),5e3)})).catch((function(e){z("error"),D("Information of ".concat(h," has already been removed from the server. The front-end is being updated")),setTimeout((function(){D(null),z("notice")}),5e3),console.error(e)}))}B()}})).catch((function(e){console.error(e)}))},valueName:h,valueNumber:k,onChangeName:function(e){b(e.target.value)},onChangeNumber:function(e){w(e.target.value)}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(s,{persons:t,filterTest:function(e){var n=e.name;return new RegExp(S,"ig").test(n)},deletion:function(e){if(window.confirm("Delete ".concat(e," ?"))){var n=t.find((function(n){return n.name===e}));j(n.id).then((function(e){console.log("delete res here",e),r(t.filter((function(e){return e.id!==n.id})))})).catch((function(e){console.error(e)})),D("".concat(n.name," has been deleted")),r(t.filter((function(e){return e.id!==n.id}))),setTimeout((function(){D(null)}),5e3)}B()}}))};t(39);c.a.render(o.a.createElement(O,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.c1a7bd82.chunk.js.map