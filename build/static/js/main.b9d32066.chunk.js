(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(16),c=t.n(r),u=t(6),l=t(2),i=function(e){var n=e.filter,t=e.setFilter;return a.a.createElement("div",null,"filter shown with",a.a.createElement("input",{value:n,onChange:function(e){console.log(e.target.value);var n=e.target.value.replace(/[^\-a-zA-Z0-9' ]+/gi,"");t(n)}}))},s=function(e){var n=e.onSubmit,t=e.valueName,o=e.valueNumber,r=e.onChangeName,c=e.onChangeNumber;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,a.a.createElement("h2",null,"add a new"),"name: ",a.a.createElement("input",{value:t,onChange:r})," ",a.a.createElement("br",null),"number: ",a.a.createElement("input",{value:o,onChange:c})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n=e.person,t=e.deletion;return a.a.createElement("div",{key:n.name},n.name," ",n.number," ",a.a.createElement("button",{onClick:function(){return t(n.name)}},"delete"))},m=function(e){var n=e.persons,t=e.filterTest,o=e.deletion;return a.a.createElement("div",null,n.filter(t).map((function(e){return a.a.createElement(f,{key:e.name+1,person:e,deletion:o})})))},d=function(e){var n=e.message,t=e.styling;return null===n?null:a.a.createElement("div",{className:t},n)},b=t(4),h=t.n(b),v="/api/persons",p=function(){return h.a.get(v).then((function(e){return e.data}))},g=function(e){return h.a.post(v,e).then((function(e){return e.data}))},E=function(e,n){return h.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},j=function(e){return h.a.delete("".concat(v,"/").concat(e)).then((function(e){return e.status}))},O=function(){var e=Object(o.useState)([]),n=Object(l.a)(e,2),t=n[0],r=n[1];Object(o.useEffect)((function(){p().then((function(e){console.log(e),r(e)})).catch((function(e){console.error(e)}))}),[]);var c=Object(o.useState)(""),f=Object(l.a)(c,2),b=f[0],h=f[1],v=Object(o.useState)(""),O=Object(l.a)(v,2),w=O[0],N=O[1],k=Object(o.useState)(""),S=Object(l.a)(k,2),y=S[0],C=S[1],T=Object(o.useState)(null),F=Object(l.a)(T,2),x=F[0],A=F[1],D=Object(o.useState)("notice"),I=Object(l.a)(D,2),J=I[0],z=I[1],B=function(){h(""),N(""),p().then((function(e){r(e)})).catch((function(e){console.error(e)}))};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(d,{message:x,styling:J}),a.a.createElement(i,{filter:y,setFilter:C}),a.a.createElement(s,{onSubmit:function(e){e.preventDefault(),b&&w||(z("error"),A("Name & Number must be filled out"),setTimeout((function(){A(null),z("notice")}),5e3)),b&&w&&p().then((function(e){if(console.log("Going to run some checks"),e.every((function(e){return e.name!==b})))g({name:b,number:w}).then((function(e){r([].concat(Object(u.a)(t),[e])),z("notice"),A("Added ".concat(b)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){z("error"),A("Following issue: ".concat(e.response.data.error)),console.log(e.response.data.error),setTimeout((function(){A(null),z("notice")}),5e3),console.log(e)})),B();else{if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var n=e.find((function(e){return e.name===b}));console.log(n),E(n.id,{name:b,number:w}).then((function(e){r([].concat(Object(u.a)(t.filter((function(e){return e.id!==n.id}))),[e])),A("Updated ".concat(b,"'s number")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){z("error"),A("Information of ".concat(b," has not been updated due to: ").concat(e.response.data.error)),setTimeout((function(){A(null),z("notice")}),5e3),console.error(e)}))}B()}})).catch((function(e){console.error(e)}))},valueName:b,valueNumber:w,onChangeName:function(e){h(e.target.value)},onChangeNumber:function(e){N(e.target.value)}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(m,{persons:t,filterTest:function(e){var n=e.name;return new RegExp(y,"ig").test(n)},deletion:function(e){if(window.confirm("Delete ".concat(e," ?"))){var n=t.find((function(n){return n.name===e}));j(n.id).then((function(e){console.log("delete res here",e),r(t.filter((function(e){return e.id!==n.id})))})).catch((function(e){console.error(e)})),A("".concat(n.name," has been deleted")),r(t.filter((function(e){return e.id!==n.id}))),setTimeout((function(){A(null)}),5e3)}B()}}))};t(39);c.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.b9d32066.chunk.js.map